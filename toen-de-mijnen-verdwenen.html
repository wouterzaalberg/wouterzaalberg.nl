<!DOCTYPE html>
<html lang="nl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Toen de Mijnen verdwenen - Wouter Zaalberg">
    <title>Toen de Mijnen verdwenen - Wouter Zaalberg</title>
    <link rel="stylesheet" href="css/styles.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@1,400;1,500&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://use.typekit.net/qwc4lnx.css">
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <link rel="stylesheet" href="css/toen-de-mijnen.css">
</head>
<body class="tdmv-page">
    <div class="horizontal-nav">
        <div>
            <a href="index.html" class="back-link">← Terug</a>
            <span class="nav-title">Toen de Mijnen verdwenen</span>
        </div>
    </div>

    <div class="tdmv-bg-layer"></div>
    <div class="tdmv-mine-bg" id="mineBg"></div>
    <div class="tdmv-part1-bg" id="part1Bg"></div>
    <div class="tdmv-dust-overlay" id="dustOverlay"></div>

    <!-- Progress indicator -->
    <div class="tdmv-progress" id="progressIndicator">
        <span class="tdmv-progress-number" id="progressNumber">0</span><span class="tdmv-progress-percent">%</span>
    </div>

    <!-- Audio soundscape -->
    <audio id="soundscape" loop preload="auto">
        <source src="toen-de-mijnen-verdwenen/soundscape.mp3" type="audio/mpeg">
    </audio>
    <div class="tdmv-sound-wrapper" id="soundWrapper">
        <div class="tdmv-sound-tooltip" id="soundTooltip">Zet soundscape uit</div>
        <button class="tdmv-sound-btn" id="soundBtn" aria-label="Geluid aan/uit">
            <svg class="sound-on" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M11 5L6 9H2v6h4l5 4V5z"/>
                <path d="M19.07 4.93a10 10 0 0 1 0 14.14M15.54 8.46a5 5 0 0 1 0 7.07"/>
            </svg>
            <svg class="sound-off" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M11 5L6 9H2v6h4l5 4V5z"/>
                <line x1="23" y1="9" x2="17" y2="15"/>
                <line x1="17" y1="9" x2="23" y2="15"/>
            </svg>
        </button>
    </div>
    <div class="horizontal-scroll-container" id="scrollContainer">
        <div class="horizontal-scroll-content">

            <!-- ============================================
                 INTRO SECTION: Vertical descent into the mine
                 ============================================ -->
            <div class="tdmv-intro-section" id="introSection" data-section="intro">
                <div class="tdmv-descent">
                    <!-- Top: Hero with title + text -->
                    <div class="tdmv-hero-panel">
                        <div class="tdmv-dust-container" id="dustContainer"></div>
                        <div class="tdmv-hero-content">
                            <h1 class="tdmv-title">
                                <span class="title-line"><span class="letter">T</span><span class="letter">o</span><span class="letter">e</span><span class="letter">n</span></span>
                                <span class="title-line"><span class="letter">d</span><span class="letter">e</span><span class="letter">&nbsp;</span><span class="letter">M</span><span class="letter">ij</span><span class="letter">n</span><span class="letter">e</span><span class="letter">n</span></span>
                                <span class="title-line"><span class="letter">v</span><span class="letter">e</span><span class="letter">r</span><span class="letter">d</span><span class="letter">w</span><span class="letter">e</span><span class="letter">n</span><span class="letter">e</span><span class="letter">n</span></span>
                            </h1>
                            <div class="tdmv-hero-text">
                                <p>De mijnindustrie schepte de mijnstreek—en toen de mijnen verdwenen, bleef de streek verweesd achter. In 67 foto's vertelt Wouter Zaalberg dit verhaal: van de welvaart en kameraadschap, via de werkloosheid en heroïne-epidemie, naar de zoektocht naar een nieuwe identiteit.</p>
                                <!-- Soundscape hint -->
                                <button class="tdmv-soundscape-hint" id="soundscapeHint">
                                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <path d="M11 5L6 9H2v6h4l5 4V5z"/>
                                        <path d="M19.07 4.93a10 10 0 0 1 0 14.14M15.54 8.46a5 5 0 0 1 0 7.07"/>
                                    </svg>
                                    <span>Zet de soundscape aan</span>
                                </button>
                            </div>
                        </div>
                        <span class="tdmv-descent-arrow">↓</span>
                    </div>

                    <!-- Bottom: Photo 1 (revealed on descent) -->
                    <div class="tdmv-intro-photo part-1">
                        <div class="tdmv-dust-container dust-photo1"></div>
                        <div class="tdmv-intro-photo-wrapper">
                            <picture>
                                <source srcset="toen-de-mijnen-verdwenen/Foto 1.webp" type="image/webp">
                                <img src="toen-de-mijnen-verdwenen/Foto 1.jpg" alt="Oranje-Nassau I" loading="eager">
                            </picture>
                        </div>
                        <div class="tdmv-caption">
                            <div class="tdmv-caption-header">Oranje-Nassau I</div>
                            <div class="tdmv-caption-text">In 1965 werkten in de mijnbouw 24.046 mensen, de indirecte banen niet meegerekend. In de Oranje-Nassaumijnen daalden per 24 uur 5188 koempels af naar het ondergrondse mijnbedrijf.</div>
                        </div>
                    </div>

                    <!-- Chapter 1 panel (third level of descent) -->
                    <div class="tdmv-intro-chapter chapter-1">
                        <div class="tdmv-dust-container dust-chapter1"></div>
                        <div class="tdmv-chapter-content">
                            <div class="tdmv-chapter-number">Deel 1</div>
                            <h2 class="tdmv-chapter-title">De wereld die verdween</h2>
                            <div class="tdmv-chapter-period">1965 — 1974</div>
                            <p class="tdmv-chapter-intro">Wie vóór 1974 door de Oostelijke Mijnstreek reisde, zou een wereld ervaren waar alles draaide om een ding: steenkool. Overal zag je schachten, schoorstenen en koeltorens. Je hoorde het geluid van schachtwielen en het lossen van kolenwagens. Je zou struikelen over de vele spoorlijnen en je vergapen aan de steenbergen die iedere dag een beetje hoger werden.</p>
                            <p class="tdmv-chapter-intro desktop-only">Er zat een grote vanzelfsprekendheid in de manier waarop de mijnbouw hier—samen met de kerk—de dienst uitmaakte en vorm gaf aan de samenleving. Het was de mijnbouw die zorgde voor scholing in de vorm van Ondergrondse Vakscholen en andere technische opleidingen. De mijn maakte van mannen koempels, zonder dat ze daar lang over nadachten. 'Dat deed je gewoon', zeggen oud-mijnwerkers als ze terugblikken op hun leven ondergronds.</p>

                        </div>
                    </div>
                </div>
            </div>

            <!-- Photo 2 - Steenkool -->
            <div class="tdmv-photo-block part-1 " data-parallax="0.5" data-section="photo">
                <picture>
                    <source srcset="toen-de-mijnen-verdwenen/Foto 2.webp" type="image/webp">
                    <img src="toen-de-mijnen-verdwenen/Foto 2.jpg" alt="Steenkool" loading="eager">
                </picture>
                <div class="tdmv-caption">
                    <div class="tdmv-caption-header">Steenkool</div>
                    <div class="tdmv-caption-text">De elf mijnen in deze regio hebben in totaal zo'n 472 miljoen ton kolen aan de aarde onttrokken. Genoeg steenkool om de gehele gemeente Heerlen met een laag van acht meter te bedekken.</div>
                </div>
            </div>

            <!-- Photo 3 - Johan Heesbeen (highlighted) -->
            <div class="tdmv-photo-highlight part-1" data-section="photo" id="photo3">
                <div class="tdmv-highlight-img-wrapper">
                    <picture>
                        <source srcset="toen-de-mijnen-verdwenen/foto 3.webp" type="image/webp">
                        <img src="toen-de-mijnen-verdwenen/foto 3.jpg" alt="Johan Heesbeen" loading="eager" class="zoom-delayed">
                    </picture>
                </div>
                <div class="tdmv-highlight-panel">
                    <div class="tdmv-highlight-header">Johan Heesbeen, oud-mijnwerker Staatsmijn Emma</div>
                    <div class="tdmv-highlight-text">"We waren bovengronds soms eenlingen, maar zodra je in de lift stapte veranderde dat. Je keek naar elkaar om en je vertrouwde op elkaar. Het moest wel."</div>
                </div>
            </div>

            <!-- Photo 4 - Oefenmijn -->
            <div class="tdmv-photo-block part-1" data-parallax="0.8" data-section="photo">
                <picture>
                    <source srcset="toen-de-mijnen-verdwenen/foto 4.webp" type="image/webp">
                    <img src="toen-de-mijnen-verdwenen/foto 4.jpg" alt="Oefenmijn" loading="lazy">
                </picture>
                <div class="tdmv-caption">
                    <div class="tdmv-caption-header">Oefenmijn op de oude steenberg van de Oranje-Nassau IV</div>
                    <div class="tdmv-caption-text">Voor een stabiele instroom van mijnwerkers werden minstens elf Ondergrondse Vakscholen opgericht. Dit waren plekken waar jongens vanaf 14-jarige leeftijd werden klaargestoomd voor een leven als houwer.</div>
                </div>
            </div>

            <!-- Photo 5 - Jan -->
            <div class="tdmv-photo-block part-1 " data-parallax="0.6" data-section="photo">
                <picture>
                    <source srcset="toen-de-mijnen-verdwenen/foto 5.webp" type="image/webp">
                    <img src="toen-de-mijnen-verdwenen/foto 5.jpg" alt="Jan" loading="lazy">
                </picture>
                <div class="tdmv-caption">
                    <div class="tdmv-caption-header">Jan, oud-mijnwerker Staatsmijn Wilhelmina</div>
                    <div class="tdmv-caption-text">De pijler stortte in en Jan belandde onder het puin. Vier jaar lag hij in talloze ziekenhuizen. Hij herstelde en keerde terug naar de mijn, een keuze die hij als vanzelfsprekend beschouwde. Er moest brood op de plank.</div>
                </div>
            </div>

            <!-- Insert: Kaart van de Mijnstreek -->
            <div class="tdmv-insert part-1" data-section="insert">
                <div class="tdmv-insert-content tdmv-map-content">
                    <h2 class="tdmv-insert-title">De mijnstreek</h2>
                    <div class="tdmv-leaflet-map" id="mineMap"></div>
                    <div class="tdmv-mine-stats" id="mineStats"></div>
                </div>
            </div>

            <!-- Photo 6 - Handen van Deddo -->
            <div class="tdmv-photo-block part-1 " data-parallax="1.1" data-section="photo">
                <picture>
                    <source srcset="toen-de-mijnen-verdwenen/foto 6.webp" type="image/webp">
                    <img src="toen-de-mijnen-verdwenen/foto 6.jpg" alt="De handen van Deddo" loading="lazy">
                </picture>
                <div class="tdmv-caption">
                    <div class="tdmv-caption-header">De handen van Deddo, oud-mijnwerker Julia</div>
                    <div class="tdmv-caption-text">Iedere oud-mijnwerker heeft ongelukken gezien of meegemaakt, van relatief klein tot dodelijk. Tijdens één moment van onoplettendheid van een collega verloor Deddo zijn vinger bij de transportband.</div>
                </div>
            </div>

            <!-- Photo 7 - Piet Bernaards (highlighted) -->
            <div class="tdmv-photo-highlight part-1 size-large" data-section="photo">
                <picture>
                    <source srcset="toen-de-mijnen-verdwenen/foto 7.webp" type="image/webp">
                    <img src="toen-de-mijnen-verdwenen/foto 7.jpg" alt="Piet Bernaards" loading="lazy">
                </picture>
                <div class="tdmv-highlight-panel">
                    <div class="tdmv-highlight-header">Piet Bernaards, oud-mijnwerker Staatsmijn Emma</div>
                    <div class="tdmv-highlight-text">"Wij tilden de stijlen zelf, met twee man. Soms meer dan 80 kilo per stijl. Kun je het je voorstellen? Ik zou nu nooit meer de mijn ingaan, maar toen was het normaal."</div>
                </div>
            </div>

            <!-- Photo 8 - Stoflong -->
            <div class="tdmv-photo-block part-1" data-parallax="0.5" data-section="photo">
                <picture>
                    <source srcset="toen-de-mijnen-verdwenen/foto 8.webp" type="image/webp">
                    <img src="toen-de-mijnen-verdwenen/foto 8.jpg" alt="Stoflong" loading="lazy">
                </picture>
                <div class="tdmv-caption">
                    <div class="tdmv-caption-header">Stoflong</div>
                    <div class="tdmv-caption-text">In officiële statistieken overleed gemiddeld 1 mijnwerker per jaar aan silicose. In de praktijk waren het er waarschijnlijk meer dan 100. Geschat wordt dat 20 tot 30% van alle mijnwerkers een vorm van stoflongen had.</div>
                </div>
            </div>

            <!-- Photo 9 - Oude luchtschacht -->
            <div class="tdmv-photo-block part-1 " data-parallax="0.9" data-section="photo">
                <img src="toen-de-mijnen-verdwenen/foto 9.jpg" alt="Oude luchtschacht" loading="lazy">
                <div class="tdmv-caption">
                    <div class="tdmv-caption-header">Oude luchtschacht</div>
                    <div class="tdmv-caption-text">De mijnbouw maakte littekens in de aarde: tunnels, schachten en instortingen die nog steeds te zien zijn, zoals deze oude luchtschacht in een weiland bij Kerkrade.</div>
                </div>
            </div>

            <!-- Photo 10 - Productiebossen -->
            <div class="tdmv-photo-block part-1 " data-parallax="1.3" data-section="photo">
                <img src="toen-de-mijnen-verdwenen/foto 10.jpg" alt="Productiebossen" loading="lazy">
                <div class="tdmv-caption">
                    <div class="tdmv-caption-header">Productiebossen van de Brunssummerheide</div>
                    <div class="tdmv-caption-text">Dennenhout was geliefd onder de mijnwerkers omdat het 'spreekt voordat het breekt' en ze daarmee gewaarschuwd werden als een gang dreigde in te storten.</div>
                </div>
            </div>

            <!-- Photo 11 - Wilhelminaberg -->
            <div class="tdmv-photo-block part-1" data-parallax="0.6" data-section="photo">
                <img src="toen-de-mijnen-verdwenen/foto 11.jpg" alt="Wilhelminaberg" loading="lazy">
                <div class="tdmv-caption">
                    <div class="tdmv-caption-header">Wilhelminaberg</div>
                    <div class="tdmv-caption-text">De Staatsmijn Wilhelmina produceerde in 63 jaar zo'n 36 miljoen ton afval, goed voor een 95 meter hoge berg. Het bleek te duur om deze na de sluiting helemaal af te graven.</div>
                </div>
            </div>

            <!-- Photo 12 - Martin (highlighted) -->
            <div class="tdmv-photo-highlight part-1 size-large" data-section="photo" id="photo12">
                <div class="tdmv-highlight-img-wrapper">
                    <img src="toen-de-mijnen-verdwenen/foto 12.jpg" alt="Martin" loading="lazy" class="zoom-delayed">
                </div>
                <div class="tdmv-highlight-panel">
                    <div class="tdmv-highlight-header">Martin, oud-mijnwerker Staatsmijn Wilhelmina</div>
                    <div class="tdmv-highlight-text">"Op de Emma genoot ik door mijn kennis groot aanzien. Dat verdween van de ene op de andere dag." Martin realiseerde de Gedachteniskapel ter nagedachtenis aan gevallen koempels.</div>
                </div>
            </div>

            <!-- Photo 13 - Yvonne Olynietsak -->
            <div class="tdmv-photo-block part-1" data-parallax="1.0" data-section="photo">
                <img src="toen-de-mijnen-verdwenen/Foto 13.jpg" alt="Yvonne Olynietsak" loading="lazy">
                <div class="tdmv-caption">
                    <div class="tdmv-caption-header">Yvonne Olynietsak, dansgroep Podlasie</div>
                    <div class="tdmv-caption-text">Met de instroom van buitenlandse arbeiders deden nieuwe tradities hun intrede, zoals Poolse volksdansen die nog steeds worden uitgevoerd door de Brunssumse dansgroep Podlasie.</div>
                </div>
            </div>

            <!-- Photo 14 - Bontjas -->
            <div class="tdmv-photo-block part-1 " data-parallax="0.8" data-section="photo">
                <img src="toen-de-mijnen-verdwenen/Foto 14.jpg" alt="Bontjas" loading="lazy">
                <div class="tdmv-caption">
                    <div class="tdmv-caption-header">Bontjas</div>
                    <div class="tdmv-caption-text">De bontjas was in Heerlen hét symbool van de gouden tijd. Het is een hardnekkige urban myth dat Heerlen de hoogste dichtheid bontjassen van Nederland had.</div>
                </div>
            </div>

            <!-- Photo 15 - Villa Pierre -->
            <div class="tdmv-photo-block part-1 " data-parallax="0.7" data-section="photo">
                <img src="toen-de-mijnen-verdwenen/foto 15.jpg" alt="Villa Pierre" loading="lazy">
                <div class="tdmv-caption">
                    <div class="tdmv-caption-header">Villa Pierre</div>
                    <div class="tdmv-caption-text">De rijkdom die de mijnbouw bracht, was te zien in de luxe villa's die in het landschap verrezen. Doorgaans gold: hoe hoger in functie, hoe dichter men bij de mijn woonde.</div>
                </div>
            </div>

            <!-- Photo 16 - Kolonie Versiliënbosch -->
            <div class="tdmv-photo-block part-1" data-parallax="0.5" data-section="photo">
                <img src="toen-de-mijnen-verdwenen/foto 16.jpg" alt="Mijnwerkerskolonie" loading="lazy">
                <div class="tdmv-caption">
                    <div class="tdmv-caption-header">Mijnwerkerskolonie Versiliënbosch</div>
                    <div class="tdmv-caption-text">Koloniën waren hechte gemeenschappen waar iedereen elkaar kende. In Heerlen lagen de meeste koloniën ten noorden van het spoor, het hoger opgeleid personeel woonden ten zuiden ervan.</div>
                </div>
            </div>

            <!-- Photo 17 - Voetbalshirt -->
            <div class="tdmv-photo-block part-1 " data-parallax="1.2" data-section="photo">
                <img src="toen-de-mijnen-verdwenen/foto 17.jpg" alt="Voetbalshirt Roda JC" loading="lazy">
                <div class="tdmv-caption">
                    <div class="tdmv-caption-header">Voetbalshirt van Roda JC Kerkrade</div>
                    <div class="tdmv-caption-text">In de Mijnstreek speelde men betaald voetbal voordat de rest van Nederland dat deed. De mijnen steunden voetbalclubs waar getalenteerde mijnwerkers voetbalden voor een groot publiek.</div>
                </div>
            </div>

            <!-- Photo 18 - Duifjes van Jos -->
            <div class="tdmv-photo-block part-1 size-large" data-parallax="0.9" data-section="photo">
                <img src="toen-de-mijnen-verdwenen/Foto 18.jpg" alt="De duifjes van Jos" loading="lazy">
                <div class="tdmv-caption">
                    <div class="tdmv-caption-header">De duifjes van Jos</div>
                    <div class="tdmv-caption-text">Duivenmelken was een populaire hobby onder mijnwerkers. Jos is een van de weinigen die nog actief is en staat iedere dag om vijf uur op om 'zijn duifjes' te verzorgen.</div>
                </div>
            </div>

            <!-- Photo 19 - Sint Barbara -->
            <div class="tdmv-photo-block part-1" data-parallax="0.6" data-section="photo">
                <img src="toen-de-mijnen-verdwenen/Foto 19.jpg" alt="Sint Barbara" loading="lazy">
                <div class="tdmv-caption">
                    <div class="tdmv-caption-header">Sint Barbara - beschermheilige van de mijnwerker</div>
                    <div class="tdmv-caption-text">De innige band tussen de kerk en de mijn werd gesymboliseerd door Sint Barbara. De kerk speelde een grote rol bij de vorming van de traditionele, hiërarchische maatschappij.</div>
                </div>
            </div>


            <!-- ============================================
                 CHAPTER 2: Verweesd, verwaarloosd en in verzet (1974-2000)
                 ============================================ -->
            <div class="tdmv-chapter chapter-2" data-section="chapter">
                <div class="tdmv-chapter-content">
                    <div class="tdmv-chapter-number">Deel 2</div>
                    <h2 class="tdmv-chapter-title">Verweesd, verwaarloosd en in verzet</h2>
                    <div class="tdmv-chapter-period">1974 — 2000</div>
                    <p class="tdmv-chapter-intro">Zo abrupt als de verbinding tussen de streek en mijnbouw zich had aangediend, zo abrupt werd deze weer doorbroken. Toen in 1974 de laatste wagen omhoog getakeld werd, een taak die seingever Henk Krans 'zonder veel plichtplegingen uitvoerde', aldus het Limburgs Dagblad, was de Nederlandse mijnbouw voorgoed voorbij. Zo'n 45.000 mijnwerkers en 30.000 werknemers van toeleveringsbedrijven waren werkloos.</p>
                    <p class="tdmv-chapter-intro">Wat was Heerlen nu het geen mijnstad meer was? Voor veel oud-mijnwerkers werd het een plek die hen dagelijks herinnerde aan hun eigen overbodigheid. Jarenlang was men trots op de bijdrage die de mijnen leverden aan de welvaart van heel Nederland. Opeens werd het mijnverleden gezien als vies en beschamend, haar gebouwen als oude rommel, haar koempels als lastig te plaatsen werklui.</p>
                </div>
                <span class="tdmv-chapter-arrow">→</span>
            </div>

            <!-- Photo 22 - Laatste gebouwen Hendrik -->
            <div class="tdmv-photo-block part-2 " data-parallax="0.5" data-section="photo">
                <img src="toen-de-mijnen-verdwenen/Foto 22.jpg" alt="Staatsmijn Hendrik" loading="lazy">
                <div class="tdmv-caption">
                    <div class="tdmv-caption-header">De laatste gebouwen van Staatsmijn Hendrik</div>
                    <div class="tdmv-caption-text">Met veel energie en één miljard gulden ging de overheid aan de slag om de mijnterreinen te saneren, de operatie 'Van zwart naar groen'.</div>
                </div>
            </div>

            <!-- Photo 23 - Afgraving steenberg -->
            <div class="tdmv-photo-block part-2 " data-parallax="1.1" data-section="photo">
                <img src="toen-de-mijnen-verdwenen/foto 23.jpg" alt="Afgraving steenberg" loading="lazy">
                <div class="tdmv-caption">
                    <div class="tdmv-caption-header">De afgraving van de steenberg</div>
                    <div class="tdmv-caption-text">Zelfs de landschappen die de mijnen hadden geschapen, verdwenen. Vrijwel alle steenbergen werden afgegraven, een proces dat nog altijd bezig is.</div>
                </div>
            </div>

            <!-- Photo 23a - Martin (highlighted) -->
            <div class="tdmv-photo-highlight part-2 size-large" data-section="photo" id="photo23a">
                <div class="tdmv-highlight-img-wrapper">
                    <img src="toen-de-mijnen-verdwenen/foto 23a.jpg" alt="Martin" loading="lazy" class="zoom-delayed">
                </div>
                <div class="tdmv-highlight-panel">
                    <div class="tdmv-highlight-header">Martin, oud-mijnwerker Oranje-Nassau III</div>
                    <div class="tdmv-highlight-text">'Het was een moeizame tijd, de mijnsluiting. Overal om mij heen was woede en ongenoegen en er was weinig kans op werk.'</div>
                    <div class="tdmv-highlight-description">Martin besloot met zijn gezin naar Zuid-Afrika te gaan, waar ze zijn kennis goed konden gebruiken in de goudmijnen. Eenmaal aangekomen ervaarde hij, met afgrijzen, de apartheid, zowel bovengronds als ondergronds. De kameraadschap die hij kende uit de Nederlandse mijnen was ver te zoeken en Martin keerde snel terug naar Limburg.</div>
                </div>
            </div>

            <!-- Photo 24 - Kaldeborn -->
            <div class="tdmv-photo-block part-2" data-parallax="0.5" data-section="photo">
                <img src="toen-de-mijnen-verdwenen/foto 24.jpg" alt="Kaldeborn" loading="lazy">
                <div class="tdmv-caption">
                    <div class="tdmv-caption-header">Kaldeborn</div>
                    <div class="tdmv-caption-text">Stadion Kaldeborn moest de kathedraal van het Limburgs voetbal worden. In plaats daarvan werd het een symbool van het abrupte einde van de welvaart.</div>
                </div>
            </div>

            <!-- Insert: Part 2 - Het grote slopen -->
            <div class="tdmv-insert part-2" data-section="insert" id="slopenInsert">
                <div class="tdmv-slopen-layout">
                    <h2 class="tdmv-slopen-title">Het grote slopen</h2>

                    <!-- Top row: Map + Timeline -->
                    <div class="tdmv-slopen-top">
                        <!-- Left: Map comparison slider -->
                        <div class="tdmv-map-compare" id="mapCompare">
                            <img src="toen-de-mijnen-verdwenen/heerlenmap1.jpg" alt="Heerlen voor de sloop" class="map-before" loading="lazy">
                            <img src="toen-de-mijnen-verdwenen/heerlenmap2.jpg" alt="Heerlen na de sloop" class="map-after" loading="lazy">
                            <div class="map-compare-line"></div>
                            <div class="map-compare-label" id="mapCompareLabel"></div>
                        </div>

                        <!-- Right: Visual Timeline 1974-1990 -->
                        <div class="tdmv-timeline-visual">
                            <!-- Timeline line -->
                            <div class="tdmv-timeline-line">
                                <span class="tdmv-timeline-start">1974</span>
                                <span class="tdmv-timeline-end">1990</span>
                            </div>

                            <!-- Period 1: 1974 -->
                            <div class="tdmv-timeline-period" data-year="1974" style="--period-start: 0%; --period-width: 6%;">
                                <div class="tdmv-period-marker"></div>
                                <div class="tdmv-period-content">
                                    <div class="tdmv-period-year">1974</div>
                                    <div class="tdmv-period-title">Sluiting laatste mijn</div>
                                    <div class="tdmv-period-summary">Verlies van ±45.000 directe banen. Start structurele werkloosheid.</div>
                                    <div class="tdmv-period-details">
                                        <div class="tdmv-period-detail">
                                            <span class="tdmv-period-detail-year">31 dec</span>
                                            <span>Oranje-Nassau I sluit als laatste mijn</span>
                                        </div>
                                        <div class="tdmv-period-detail">
                                            <span class="tdmv-period-detail-year"></span>
                                            <span>30.000 toeleveranciers verliezen werk</span>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Period 2: 1975-1978 -->
                            <div class="tdmv-timeline-period desktop-only" data-year="1975-1978" style="--period-start: 6%; --period-width: 25%;">
                                <div class="tdmv-period-marker"></div>
                                <div class="tdmv-period-content">
                                    <div class="tdmv-period-year">1975–1978</div>
                                    <div class="tdmv-period-title">Herstructureringsbeleid</div>
                                    <div class="tdmv-period-summary">Sanering mijnsites, falende vervangende industrie.</div>
                                    <div class="tdmv-period-details">
                                        <div class="tdmv-period-detail">
                                            <span class="tdmv-period-detail-year">1975</span>
                                            <span>Staatsmijnen wordt DSM</span>
                                        </div>
                                        <div class="tdmv-period-detail">
                                            <span class="tdmv-period-detail-year">1976</span>
                                            <span>Oprichting Rijksuniversiteit Limburg</span>
                                        </div>
                                        <div class="tdmv-period-detail">
                                            <span class="tdmv-period-detail-year">1978</span>
                                            <span>Perspectievennota Limburg</span>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Period 3: 1979-1982 -->
                            <div class="tdmv-timeline-period" data-year="1979-1982" style="--period-start: 31%; --period-width: 25%;">
                                <div class="tdmv-period-marker"></div>
                                <div class="tdmv-period-content">
                                    <div class="tdmv-period-year">1979–1982</div>
                                    <div class="tdmv-period-title">Oliecrisis en dieptepunt</div>
                                    <div class="tdmv-period-summary">Werkloosheidspiek (>10%), heroïne-epidemie zichtbaar in Heerlen.</div>
                                    <div class="tdmv-period-details">
                                        <div class="tdmv-period-detail">
                                            <span class="tdmv-period-detail-year">1979</span>
                                            <span>CBS verhuist naar Heerlen</span>
                                        </div>
                                        <div class="tdmv-period-detail">
                                            <span class="tdmv-period-detail-year">1980</span>
                                            <span>Tweede oliecrisis treft regio hard</span>
                                        </div>
                                        <div class="tdmv-period-detail">
                                            <span class="tdmv-period-detail-year">1982</span>
                                            <span>Dieptepunt: werkloosheid >10%</span>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Period 4: 1983-1986 -->
                            <div class="tdmv-timeline-period desktop-only" data-year="1983-1986" style="--period-start: 56%; --period-width: 25%;">
                                <div class="tdmv-period-marker"></div>
                                <div class="tdmv-period-content">
                                    <div class="tdmv-period-year">1983–1986</div>
                                    <div class="tdmv-period-title">Stabilisatie zonder herstel</div>
                                    <div class="tdmv-period-summary">Hoge WAO-instroom, gezondheidsachterstand.</div>
                                    <div class="tdmv-period-details">
                                        <div class="tdmv-period-detail">
                                            <span class="tdmv-period-detail-year">1984</span>
                                            <span>Open Universiteit naar Heerlen</span>
                                        </div>
                                        <div class="tdmv-period-detail">
                                            <span class="tdmv-period-detail-year">1985</span>
                                            <span>Hoofdkantoor Staatsmijnen gesloopt</span>
                                        </div>
                                        <div class="tdmv-period-detail">
                                            <span class="tdmv-period-detail-year">1986</span>
                                            <span>Opening Corio Center</span>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Period 5: 1987-1990 -->
                            <div class="tdmv-timeline-period" data-year="1987-1990" style="--period-start: 81%; --period-width: 19%;">
                                <div class="tdmv-period-marker"></div>
                                <div class="tdmv-period-content">
                                    <div class="tdmv-period-year">1987–1990</div>
                                    <div class="tdmv-period-title">Einde uitzonderingsbeleid</div>
                                    <div class="tdmv-period-summary">Blijvende krimp en culturele heroriëntatie.</div>
                                    <div class="tdmv-period-details">
                                        <div class="tdmv-period-detail">
                                            <span class="tdmv-period-detail-year">1987</span>
                                            <span>Einde rijkssteun herstructurering</span>
                                        </div>
                                        <div class="tdmv-period-detail">
                                            <span class="tdmv-period-detail-year">1990</span>
                                            <span>Operatie Hartslag tegen drugscriminaliteit</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Bottom row: Statistics -->
                    <div class="tdmv-slopen-stats">
                        <div class="tdmv-stat-item">
                            <div class="tdmv-stat-number negative">75.000</div>
                            <div class="tdmv-stat-label">banen verloren</div>
                        </div>
                        <div class="tdmv-stat-item">
                            <div class="tdmv-stat-number positive">14.000</div>
                            <div class="tdmv-stat-label">nieuwe banen gecreëerd</div>
                        </div>
                        <div class="tdmv-stat-item">
                            <div class="tdmv-stat-number">762</div>
                            <div class="tdmv-stat-label">hectare gesaneerd</div>
                        </div>
                        <div class="tdmv-stat-item">
                            <div class="tdmv-stat-number">535</div>
                            <div class="tdmv-stat-label">miljoen gulden steun</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Photo 26 - Zakia -->
            <div class="tdmv-photo-block part-2" data-parallax="1.2" data-section="photo" id="photoZakia">
                <img src="toen-de-mijnen-verdwenen/foto 26.jpg" alt="Zakia" loading="lazy">
                <div class="tdmv-caption">
                    <div class="tdmv-caption-header">Zakia, dochter van een mijnwerker</div>
                    <div class="tdmv-caption-text">Het verdwijnen van de mijnen betekende het verdwijnen van de werkgelegenheid. Mensen trokken weg. De meesten richting Randstad. Enkelen, waaronder de familie van Zakia, bleven.</div>
                </div>
            </div>

            <!-- Photo 27 - Verdwijnen kerk -->
            <div class="tdmv-photo-block part-2" data-parallax="0.6" data-section="photo">
                <img src="toen-de-mijnen-verdwenen/foto 27.jpg" alt="Verdwijnen van de kerk" loading="lazy">
                <div class="tdmv-caption">
                    <div class="tdmv-caption-header">Het verdwijnen van de kerk</div>
                    <div class="tdmv-caption-text">Kerk en mijn hadden deze regio vormgegeven, via een rijk verenigingsleven en strenge mores. Maar de invloed van de kerk op de streek was snel tanende.</div>
                </div>
            </div>

            <!-- Photo 28 - Bern (highlighted) -->
            <div class="tdmv-photo-highlight part-2 size-large" data-section="photo" id="photo28">
                <div class="tdmv-highlight-img-wrapper">
                    <img src="toen-de-mijnen-verdwenen/Foto 28.jpg" alt="Bern" loading="lazy" class="zoom-delayed">
                </div>
                <div class="tdmv-highlight-panel">
                    <div class="tdmv-highlight-header">Bern, oud-mijnwerker Staatsmijnen Wilhelmina en Emma</div>
                    <div class="tdmv-highlight-text">"De snelheid en grondigheid waarmee alles werd weggehaald, het was alsof we ons schaamden voor ons verleden."</div>
                </div>
            </div>

            <!-- Photo 29 - Longinstituut -->
            <div class="tdmv-photo-block part-2" data-parallax="0.9" data-section="photo" style="margin-left: 8rem;">
                <img src="toen-de-mijnen-verdwenen/Foto 29.jpg" alt="Longinstituut" loading="lazy">
                <div class="tdmv-caption">
                    <div class="tdmv-caption-header">Het oude longinstituut van Treebeek</div>
                    <div class="tdmv-caption-text">Toen de mijnen verdwenen, bleven de mijnwerkers achter met versteende longen. Pas na jaren actievoeren kregen ongeveer 2000 mijnwerkers een schadevergoeding en excuses.</div>
                </div>
            </div>

            <!-- Photo 30 - Terworm -->
            <div class="tdmv-photo-block part-2" data-parallax="1.0" data-section="photo">
                <img src="toen-de-mijnen-verdwenen/foto 30.jpg" alt="Terworm" loading="lazy">
                <div class="tdmv-caption">
                    <div class="tdmv-caption-header">Terworm</div>
                    <div class="tdmv-caption-text">De verwaarlozing van Terworm was exemplarisch voor hoe private mijnbedrijven de regio waar ze zoveel aan hadden verdiend achterlieten.</div>
                </div>
            </div>

            <!-- Photo 31 - Winkelcentrum -->
            <div class="tdmv-photo-block part-2 " data-parallax="0.7" data-section="photo">
                <img src="toen-de-mijnen-verdwenen/Foto 31.jpg" alt="Winkelcentrum" loading="lazy">
                <div class="tdmv-caption">
                    <div class="tdmv-caption-header">Winkelcentrum</div>
                    <div class="tdmv-caption-text">In 1985 week het karakteristieke hoofdkantoor van de Staatsmijnen voor het winkelcentrum Corio Center. 'Een historische vergissing', schreef Maurice Hermans.</div>
                </div>
            </div>

            <!-- Photo 39 - Garrelt -->
            <div class="tdmv-photo-block part-2" data-parallax="0.5" data-section="photo">
                <img src="toen-de-mijnen-verdwenen/foto 39.jpg" alt="Garrelt" loading="lazy">
                <div class="tdmv-caption">
                    <div class="tdmv-caption-header">Garrelt</div>
                    <div class="tdmv-caption-text">"In de jaren tachtig en negentig zijn meerdere gebruikers vermoord. Ik heb verslaafden zien rennen met hun darmen uit hun buik. Voor mij was leven op straat vooral overleven."</div>
                </div>
            </div>

            <!-- Photo 40 - Shantal -->
            <div class="tdmv-photo-block part-2 size-large" data-parallax="0.8" data-section="photo" id="photo40">
                <div class="tdmv-photo-img-wrapper">
                    <img src="toen-de-mijnen-verdwenen/Foto 40.jpg" alt="Shantal" loading="lazy" class="zoom-delayed">
                </div>
                <div class="tdmv-caption">
                    <div class="tdmv-caption-header">Shantal</div>
                    <div class="tdmv-caption-text">Shantal tippelde in de jaren tachtig op de Willemstraat. Ze is een van de weinige vrouwen die deze tijd heeft overleefd en er nu nog over kan vertellen.</div>
                </div>
            </div>


            <!-- ============================================
                 CHAPTER 3: Nieuwe trots en oude wonden (2000-heden)
                 ============================================ -->
            <div class="tdmv-chapter chapter-3" data-section="chapter">
                <div class="tdmv-chapter-content">
                    <div class="tdmv-chapter-number">Deel 3</div>
                    <h2 class="tdmv-chapter-title">Nieuwe trots en oude wonden</h2>
                    <div class="tdmv-chapter-period">2000 — heden</div>
                    <p class="tdmv-chapter-intro">Inmiddels lijkt Heerlen een stad te zijn geworden waar heden en verleden een nieuwe balans hebben gevonden. De mijnbouw mag weer nadrukkelijk onderdeel zijn van de identiteit van de regio. Oud-mijnwerkers zoeken elkaar op om het verleden levend te houden en jongere generaties verdiepen zich in de geschiedenis van de streek, voelen verbintenis en soms ook trots. Het jaar van de Mijnen in 2015 symboliseert deze hernieuwde aandacht.</p>
                    <p class="tdmv-chapter-intro">Tegelijkertijd dient het mijnverleden zich ook aan waar dat onontkoombaar is. De geschiedenis van de mijnen en haar sluiting heeft deze streek ten diepste gevormd—en vormt haar nog iedere dag. Of zoals een bewoner het zegt: "Het verleden voelt voor mij als een litteken. Geen litteken om je voor te schamen, maar slechts een teken dat je leeft. Dat je durft te springen en te vallen en op te staan."</p>
                </div>
                <span class="tdmv-chapter-arrow">→</span>
            </div>

            <!-- Photo 46 - Portret van Heerlen -->
            <div class="tdmv-photo-block part-3 size-large" data-parallax="0.6" data-section="photo">
                <img src="toen-de-mijnen-verdwenen/foto 46.jpg" alt="Portret van Heerlen" loading="lazy">
                <div class="tdmv-caption">
                    <div class="tdmv-caption-header">Portret van Heerlen</div>
                    <div class="tdmv-caption-text">Een wilde iris in de ochtendzon op de Heksenberg, de voormalige steenberg van de Oranje-Nassau IV.</div>
                </div>
            </div>

            <!-- Photo 47 - Lindsay en dochter -->
            <div class="tdmv-photo-block part-3 " data-parallax="0.5" data-section="photo">
                <img src="toen-de-mijnen-verdwenen/Foto 47.jpg" alt="Lindsay en haar dochter" loading="lazy">
                <div class="tdmv-caption">
                    <div class="tdmv-caption-header">Lindsay en haar dochter</div>
                    <div class="tdmv-caption-text">"Mijn opa was een stille man, maar leefde op als hij over de mijnen vertelde. Die trots greep mij aan. Uren en uren heb ik naar zijn verhalen geluisterd."</div>
                </div>
            </div>

            <!-- Photo 48 - Mijnmuseum -->
            <div class="tdmv-photo-block part-3" data-parallax="0.9" data-section="photo">
                <img src="toen-de-mijnen-verdwenen/Foto 48.jpg" alt="Mijnmuseum Brunssum" loading="lazy">
                <div class="tdmv-caption">
                    <div class="tdmv-caption-header">Mijnmuseum Brunssum</div>
                    <div class="tdmv-caption-text">Iedere woensdagmiddag komen de oud-mijnwerkers samen. Zittend tussen de spullen die ze liefdevol hebben verzameld, praten ze urenlang over het leven van vroeger.</div>
                </div>
            </div>

            <!-- Photo 49 - Hans koempelmis -->
            <div class="tdmv-photo-block part-3 " data-parallax="1.0" data-section="photo">
                <img src="toen-de-mijnen-verdwenen/Foto 49.jpg" alt="Hans op de koempelmis" loading="lazy">
                <div class="tdmv-caption">
                    <div class="tdmv-caption-header">Hans op de koempelmis</div>
                    <div class="tdmv-caption-text">Hans Jacobs (75) bezoekt maandelijks de koempelmis, waarin de gevallen mijnwerkers van alle mijnen uit de regio worden herdacht.</div>
                </div>
            </div>

            <!-- Insert: Uit het dal -->
            <div class="tdmv-insert part-3" data-section="insert" id="uithetdalInsert">
                <div class="tdmv-uithetdal-content">
                    <!-- Titel links uitgelijnd -->
                    <h2 class="tdmv-uithetdal-title anim-item" style="--anim-delay: 0s;">Uit het dal</h2>

                    <!-- 3-rijen grid -->
                    <div class="tdmv-uithetdal-rows">
                        <!-- Rij 1: Foto + Bevolkingsheader -->
                        <div class="tdmv-uithetdal-row row-1">
                            <div class="tdmv-uithetdal-photo-small anim-item" style="--anim-delay: 0.1s;">
                                <img src="toen-de-mijnen-verdwenen/uithetdal.jpg" alt="Uit het dal" loading="lazy">
                                <div class="tdmv-uithetdal-caption">De goedkope facade van een winkelpand in het centrum wordt afgebroken en de oude architectuur komt langzaam tevoorschijn.</div>
                            </div>
                            <div class="tdmv-parkstad-header anim-item" style="--anim-delay: 0.2s;">
                                <div class="tdmv-parkstad-intro">De stand van Heerlen en omstreken:</div>
                                <div class="tdmv-parkstad-population">255.600</div>
                                <div class="tdmv-parkstad-sublabel">inwoners in Stadsregio Parkstad (2022)</div>
                                <div class="tdmv-parkstad-gemeenten">Beekdaelen · Brunssum · Heerlen · Kerkrade · Landgraaf · Simpelveld · Voerendaal</div>
                            </div>
                        </div>

                        <!-- Rij 2: 4 statistieken -->
                        <div class="tdmv-uithetdal-row row-2">
                            <!-- Uitkeringen -->
                            <div class="tdmv-parkstad-stat anim-item" style="--anim-delay: 0.3s;">
                                <div class="tdmv-parkstad-stat-label">Huishoudens met uitkering</div>
                                <div class="tdmv-parkstad-bars">
                                    <div class="tdmv-parkstad-bar-row">
                                        <span class="tdmv-bar-label">Parkstad</span>
                                        <div class="tdmv-bar-track"><div class="tdmv-bar-fill parkstad" data-width="100%"></div></div>
                                        <span class="tdmv-bar-value">20%</span>
                                    </div>
                                    <div class="tdmv-parkstad-bar-row">
                                        <span class="tdmv-bar-label">Limburg</span>
                                        <div class="tdmv-bar-track"><div class="tdmv-bar-fill compare" data-width="77%"></div></div>
                                        <span class="tdmv-bar-value">15,4%</span>
                                    </div>
                                    <div class="tdmv-parkstad-bar-row">
                                        <span class="tdmv-bar-label">Nederland</span>
                                        <div class="tdmv-bar-track"><div class="tdmv-bar-fill compare" data-width="61.5%"></div></div>
                                        <span class="tdmv-bar-value">12,3%</span>
                                    </div>
                                </div>
                            </div>

                            <!-- Gezondheid -->
                            <div class="tdmv-parkstad-stat anim-item" style="--anim-delay: 0.4s;">
                                <div class="tdmv-parkstad-stat-label">Goede/zeer goede gezondheid</div>
                                <div class="tdmv-parkstad-bars">
                                    <div class="tdmv-parkstad-bar-row">
                                        <span class="tdmv-bar-label">Parkstad</span>
                                        <div class="tdmv-bar-track"><div class="tdmv-bar-fill parkstad" data-width="91.9%"></div></div>
                                        <span class="tdmv-bar-value">64,7%</span>
                                    </div>
                                    <div class="tdmv-parkstad-bar-row">
                                        <span class="tdmv-bar-label">Nederland</span>
                                        <div class="tdmv-bar-track"><div class="tdmv-bar-fill compare" data-width="100%"></div></div>
                                        <span class="tdmv-bar-value">70,4%</span>
                                    </div>
                                </div>
                            </div>

                            <!-- Arbeidsparticipatie -->
                            <div class="tdmv-parkstad-stat anim-item" style="--anim-delay: 0.5s;">
                                <div class="tdmv-parkstad-stat-label">Netto arbeidsparticipatie</div>
                                <div class="tdmv-parkstad-single">
                                    <span class="tdmv-parkstad-number count-up" data-value="665">0</span>
                                    <span class="tdmv-parkstad-unit">per 1.000 inwoners (15-64)</span>
                                </div>
                            </div>

                            <!-- Retail leegstand -->
                            <div class="tdmv-parkstad-stat anim-item desktop-only" style="--anim-delay: 0.6s;">
                                <div class="tdmv-parkstad-stat-label">Retail-leegstand</div>
                                <div class="tdmv-parkstad-single highlight-negative">
                                    <span class="tdmv-parkstad-number count-up" data-value="45.1" data-suffix="%">0%</span>
                                    <span class="tdmv-parkstad-unit">van verkooppunten</span>
                                </div>
                            </div>
                        </div>

                        <!-- Rij 3: 4 statistieken -->
                        <div class="tdmv-uithetdal-row row-3">
                            <!-- Werkgelegenheid -->
                            <div class="tdmv-parkstad-stat anim-item" style="--anim-delay: 0.7s;">
                                <div class="tdmv-parkstad-stat-label">Werkgelegenheid</div>
                                <div class="tdmv-parkstad-dual">
                                    <div class="tdmv-parkstad-dual-item">
                                        <span class="tdmv-parkstad-number count-up" data-value="109000" data-format="thousands">0</span>
                                        <span class="tdmv-parkstad-unit">werknemers</span>
                                    </div>
                                    <div class="tdmv-parkstad-dual-item">
                                        <span class="tdmv-parkstad-number count-up" data-value="21000" data-format="thousands">0</span>
                                        <span class="tdmv-parkstad-unit">bedrijven</span>
                                    </div>
                                </div>
                            </div>

                            <!-- Vergrijzing -->
                            <div class="tdmv-parkstad-stat anim-item" style="--anim-delay: 0.8s;">
                                <div class="tdmv-parkstad-stat-label">Vergrijzing (65+)</div>
                                <div class="tdmv-parkstad-bars">
                                    <div class="tdmv-parkstad-bar-row">
                                        <span class="tdmv-bar-label">Parkstad</span>
                                        <div class="tdmv-bar-track"><div class="tdmv-bar-fill parkstad" data-width="100%"></div></div>
                                        <span class="tdmv-bar-value">26,4%</span>
                                    </div>
                                    <div class="tdmv-parkstad-bar-row">
                                        <span class="tdmv-bar-label">Nederland</span>
                                        <div class="tdmv-bar-track"><div class="tdmv-bar-fill compare" data-width="75%"></div></div>
                                        <span class="tdmv-bar-value">19,8%</span>
                                    </div>
                                </div>
                            </div>

                            <!-- Woningwaarde -->
                            <div class="tdmv-parkstad-stat anim-item" style="--anim-delay: 0.9s;">
                                <div class="tdmv-parkstad-stat-label">Gem. woningwaarde</div>
                                <div class="tdmv-parkstad-single">
                                    <span class="tdmv-parkstad-number">€ <span class="count-up" data-value="227000" data-format="thousands">0</span></span>
                                    <span class="tdmv-parkstad-unit">NL gemiddelde: € 420.000</span>
                                </div>
                            </div>

                            <!-- Bevolkingstrend -->
                            <div class="tdmv-parkstad-stat anim-item desktop-only" style="--anim-delay: 1.0s;">
                                <div class="tdmv-parkstad-stat-label">Bevolkingstrend</div>
                                <div class="tdmv-parkstad-trend">
                                    <span class="tdmv-trend-text">−12% sinds 1997, krimp vlakt af</span>
                                    <span class="tdmv-trend-source">CBS / PBL prognose</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Photo 50 - Bart tattoo -->
            <div class="tdmv-photo-block part-3" data-parallax="0.7" data-section="photo" id="photoBart">
                <img src="toen-de-mijnen-verdwenen/Foto 50.jpg" alt="Bart en zijn tattoo" loading="lazy">
                <div class="tdmv-caption">
                    <div class="tdmv-caption-header">Bart en zijn tattoo</div>
                    <div class="tdmv-caption-text">"Wanneer je nu ziet hoe Heerlen weer aan het bloeien is, nadat het ooit een troosteloze stad was waar drugsproblematiek hoogtij vierde, dan kun je daar met recht trots op zijn."</div>
                </div>
            </div>

            <!-- Photo 51 - James Jetlag -->
            <div class="tdmv-photo-block part-3" data-parallax="0.5" data-section="photo">
                <img src="toen-de-mijnen-verdwenen/Foto 51.jpg" alt="James Jetlag" loading="lazy">
                <div class="tdmv-caption">
                    <div class="tdmv-caption-header">James Jetlag, muralist</div>
                    <div class="tdmv-caption-text">James Jetlag, een van Heerlens bekendste muralisten en grondlegger van de muralcultuur, maakte in 2012 een serie werken waar het mijnverleden voor het eerst was te zien.</div>
                </div>
            </div>

            <!-- Photo 56 - John motorclub -->
            <div class="tdmv-photo-block part-3 size-large" data-parallax="1.2" data-section="photo" id="photo56">
                <div class="tdmv-photo-img-wrapper">
                    <img src="toen-de-mijnen-verdwenen/Foto 56.jpg" alt="John" loading="lazy" class="zoom-delayed">
                </div>
                <div class="tdmv-caption">
                    <div class="tdmv-caption-header">John, lid van de motorclub</div>
                    <div class="tdmv-caption-text">Op de plek waar ooit de Oranje-Nassau IV stond, staat nu het clubhuis van de Limbury Roadstars.</div>
                </div>
            </div>

            <!-- Photo 57 - Emeli -->
            <div class="tdmv-photo-block part-3 " data-parallax="0.9" data-section="photo">
                <img src="toen-de-mijnen-verdwenen/Foto 57.jpg" alt="Emeli" loading="lazy">
                <div class="tdmv-caption">
                    <div class="tdmv-caption-header">Emeli (9), trompettist van het Toekomst Orkest Laura</div>
                    <div class="tdmv-caption-text">Emeli, kleindochter van een mijnwerker, speelt trompet in het Toekomst Orkest Laura. Harmonie Laura bloeit met 90 muzikanten en een 75-jarig jubileum in het vooruitzicht.</div>
                </div>
            </div>

            <!-- Photo 58 - Marcel kolen -->
            <div class="tdmv-photo-block part-3" data-parallax="1.0" data-section="photo">
                <img src="toen-de-mijnen-verdwenen/Foto 58.jpg" alt="Marcel en de kolen" loading="lazy">
                <div class="tdmv-caption">
                    <div class="tdmv-caption-header">Marcel en de kolen</div>
                    <div class="tdmv-caption-text">Als een van de laatste plaatsen in de Mijnstreek vindt hier, op een kolenveredelingsbedrijf in Eygelshoven, nog economische activiteit rondom steenkool plaats.</div>
                </div>
            </div>

            <!-- Photo 60 - Zilverzand -->
            <div class="tdmv-photo-block part-3 " data-parallax="0.7" data-section="photo">
                <img src="toen-de-mijnen-verdwenen/foto 60.jpg" alt="Zilverzand" loading="lazy">
                <div class="tdmv-caption">
                    <div class="tdmv-caption-header">Zilverzand en Heksenberg</div>
                    <div class="tdmv-caption-text">Op de locatie van de Oranje-Nassau IV wordt nu zilverzand gewonnen. Zilverzand wordt gebruikt voor onder andere de productie van glas en silicium.</div>
                </div>
            </div>

            <!-- Photo 61 - Windmolens -->
            <div class="tdmv-photo-block part-3" data-parallax="0.5" data-section="photo">
                <img src="toen-de-mijnen-verdwenen/foto 61.jpg" alt="Windmolens" loading="lazy">
                <div class="tdmv-caption">
                    <div class="tdmv-caption-header">Windmolens</div>
                    <div class="tdmv-caption-text">De voormalige Mijnstreek wordt in 2040 energieneutraal, dat is althans het streven. Hier wordt onderhoud gepleegd aan een windturbine over de grens in Duitsland.</div>
                </div>
            </div>

            <!-- Photo 64 - Mesy -->
            <div class="tdmv-photo-block part-3 " data-parallax="0.8" data-section="photo">
                <img src="toen-de-mijnen-verdwenen/foto 64.jpg" alt="Mesy" loading="lazy">
                <div class="tdmv-caption">
                    <div class="tdmv-caption-header">Mesy</div>
                    <div class="tdmv-caption-text">Mesy (20), een opkomende rapper die onlangs een platencontract tekende. Mesy is in veel opzichten een product van het nieuwe Heerlen: uitgesproken, talentvol en rauw.</div>
                </div>
            </div>

            <!-- Photo 65 - Inaya -->
            <div class="tdmv-photo-block part-3 size-large" data-parallax="0.6" data-section="photo" id="photo65">
                <div class="tdmv-photo-img-wrapper">
                    <img src="toen-de-mijnen-verdwenen/Foto 65.jpg" alt="Inaya" loading="lazy" class="zoom-delayed">
                </div>
                <div class="tdmv-caption">
                    <div class="tdmv-caption-header">Inaya, kinderburgemeester Heerlen</div>
                    <div class="tdmv-caption-text">Inaya was elf jaar oud toen ze in het kindercollege van Heerlen kwam. De opa van Inaya werkte als mijnwerker in een Oranje-Nassau mijn.</div>
                </div>
            </div>

            <!-- Story end divider -->
            <div class="tdmv-story-end">* * *</div>

            <!-- Insert: Als expositie en in de media -->
            <div class="tdmv-insert part-3" data-section="insert">
                <div class="tdmv-media-content">
                    <h2 class="tdmv-media-title">Als expositie en in de media</h2>
                    <div class="tdmv-media-row">
                        <div class="tdmv-media-photos">
                            <img src="toen-de-mijnen-verdwenen/media 1.jpg" alt="Media" loading="lazy">
                            <img src="toen-de-mijnen-verdwenen/media 2.jpg" alt="Media" loading="lazy">
                            <img src="toen-de-mijnen-verdwenen/media 3.jpg" alt="Media" loading="lazy">
                            <img src="toen-de-mijnen-verdwenen/media 4.jpg" alt="Media" loading="lazy">
                            <img src="toen-de-mijnen-verdwenen/media 5.jpg" alt="Media" loading="lazy">
                            <img src="toen-de-mijnen-verdwenen/media 6.jpg" alt="Media" loading="lazy">
                        </div>
                        <div class="tdmv-media-text">
                            <p>Grote expositie in Heerlen centrum</p>
                            <p>Exposities in Amsterdam, Maastricht en Kerkrade</p>
                            <p>Publicaties in <a href="https://www.volkskrant.nl/kijkverder/v/2022/in-limburg-zijn-de-mijnen-gesloten-maar-niet-vergeten~v483533/" target="_blank"><em>De Volkskrant</em></a>, <a href="https://www.nrc.nl/nieuws/2024/12/13/de-laatste-mijn-in-limburg-is-al-een-halve-eeuw-dicht-maar-het-mijnverleden-is-nog-steeds-niet-afgesloten-a4876358" target="_blank"><em>NRC</em></a>, PF Magazine, <em>De Limburger</em> en meer</p>
                            <p>Uitgave eigen boek (uitverkocht)</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- End Panel -->
            <div class="end-panel" data-section="end" style="flex-shrink: 0; height: 100vh; min-width: 800px; background: linear-gradient(135deg, #2d1f1a 0%, #1a1816 100%); display: flex; flex-direction: column; justify-content: center; padding: 3rem;">
                <p style="font-family: 'Scala Sans SC', sans-serif; font-size: 1.2rem; color: rgba(255,255,255,0.5); text-transform: uppercase; letter-spacing: 0.1em; margin-bottom: 3rem;">Einde van deze serie</p>
                <p style="font-family: 'Scala Sans', sans-serif; font-size: 0.85rem; color: rgba(255,255,255,0.4); margin-bottom: 1rem; text-transform: uppercase; letter-spacing: 0.05em;">Bekijk ook</p>
                <nav style="display: flex; flex-direction: column; gap: 0.6rem;">
                    <a href="index.html" style="font-family: 'Scala Sans', sans-serif; font-size: 0.95rem; color: #ffffff; text-decoration: none; transition: color 0.3s;">Home</a>
                    <a href="de-exoten.html" style="font-family: 'Scala Sans', sans-serif; font-size: 0.95rem; color: #ffffff; text-decoration: none; transition: color 0.3s;">De Exoten</a>
                    <a href="mijn-tatoeages.html" style="font-family: 'Scala Sans', sans-serif; font-size: 0.95rem; color: #ffffff; text-decoration: none; transition: color 0.3s;">Mijn Tatoeages</a>
                    <a href="a-better-port.html" style="font-family: 'Scala Sans', sans-serif; font-size: 0.95rem; color: #ffffff; text-decoration: none; transition: color 0.3s;">A Better Port</a>
                    <a href="in-blauw-licht.html" style="font-family: 'Scala Sans', sans-serif; font-size: 0.95rem; color: #ffffff; text-decoration: none; transition: color 0.3s;">In Blauw Licht</a>
                    <a href="het-noordzeekanaal-gebied.html" style="font-family: 'Scala Sans', sans-serif; font-size: 0.95rem; color: #ffffff; text-decoration: none; transition: color 0.3s;">Het Noordzeekanaal Gebied</a>
                    <a href="de-onmisbaren.html" style="font-family: 'Scala Sans', sans-serif; font-size: 0.95rem; color: #ffffff; text-decoration: none; transition: color 0.3s;">De Onmisbaren</a>
                    <a href="een-plek-onder-de-zon.html" style="font-family: 'Scala Sans', sans-serif; font-size: 0.95rem; color: #ffffff; text-decoration: none; transition: color 0.3s;">Een Plek Onder de Zon</a>
                </nav>
                <div style="margin-top: 3rem;">
                    <p style="font-family: 'Scala Sans', sans-serif; font-size: 0.85rem; color: rgba(255,255,255,0.4); margin-bottom: 0.5rem; text-transform: uppercase; letter-spacing: 0.05em;">Contact</p>
                    <p style="font-family: 'Scala Sans', sans-serif; font-size: 0.95rem; color: #ffffff; margin-bottom: 0.3rem;">wouterzaalberg@gmail.com</p>
                    <p style="font-family: 'Scala Sans', sans-serif; font-size: 0.95rem; color: #ffffff; margin-bottom: 1.5rem;">06 45 788 180</p>
                    <a href="https://instagram.com/wouterzaalberg" target="_blank" style="display: inline-block; color: #ffffff; transition: opacity 0.3s;" onmouseover="this.style.opacity='0.7'" onmouseout="this.style.opacity='1'">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                            <path d="M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948 0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072 3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.163 6.162 6.163 6.162-2.759 6.162-6.163c0-3.403-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4 0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.21-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44c.795 0 1.439-.645 1.439-1.44s-.644-1.44-1.439-1.44z"/>
                        </svg>
                    </a>
                </div>
            </div>
        </div>
    </div>

    <script>
        const container = document.getElementById('scrollContainer');
        const allItems = document.querySelectorAll('[data-section]');
        const chapterArrows = document.querySelectorAll('.tdmv-chapter-arrow');
        const introSection = document.getElementById('introSection');
        let currentIndex = 0;
        let isAnimating = false;
        let introState = 0; // 0 = hero, 1 = photo 1, 2 = chapter 1

        // Improved scroll handling - works for both mouse and trackpad
        // See docs/horizontal-scroll.md for documentation
        let accumulatedDelta = 0;
        let lastDelta = 0;
        let scrollDirection = 0;
        const DELTA_THRESHOLD = 50;  // Minimum delta to trigger scroll
        const COOLDOWN = 500;        // Ms to wait after scroll
        const MOMENTUM_THRESHOLD = 0.5; // Ignore if delta drops below this ratio

        // Check if current item is the intro section
        function isAtIntroSection(index) {
            return allItems[index] && allItems[index].id === 'introSection';
        }

        // Toggle intro section state (descent into mine - 3 levels)
        function setIntroState(state) {
            introState = state;
            introSection.classList.remove('descended', 'descended-2');

            if (state === 1) {
                introSection.classList.add('descended');
            } else if (state === 2) {
                introSection.classList.add('descended', 'descended-2');
            }
        }

        // Descent arrow click handlers (multiple arrows now)
        const descentArrows = document.querySelectorAll('.tdmv-descent-arrow');
        descentArrows.forEach(arrow => {
            arrow.addEventListener('click', () => {
                if (introState < 2) {
                    setIntroState(introState + 1);
                } else {
                    // At state 2, go to next section
                    handleScroll(1);
                }
            });
        });

        // Scroll to target index
        function scrollToIndex(index) {
            if (index < 0) index = 0;
            if (index >= allItems.length) index = allItems.length - 1;

            currentIndex = index;

            allItems[currentIndex].scrollIntoView({
                behavior: 'smooth',
                block: 'center',
                inline: 'center'
            });
        }

        // Process scroll with intro state handling
        function handleScroll(direction) {
            // If at intro section, handle state transitions (3 levels)
            if (isAtIntroSection(currentIndex)) {
                if (direction > 0) {
                    // Forward: hero → photo → chapter → next
                    if (introState < 2) {
                        setIntroState(introState + 1);
                        return;
                    }
                    // introState === 2: continue to next item
                } else if (direction < 0) {
                    // Backward: chapter → photo → hero → stay
                    if (introState > 0) {
                        setIntroState(introState - 1);
                        return;
                    }
                    // introState === 0: stay at beginning
                    return;
                }
            }

            // Normal scrolling
            const newIndex = currentIndex + direction;

            // If moving to intro section, set appropriate state
            if (isAtIntroSection(newIndex)) {
                if (direction > 0) {
                    setIntroState(0); // Coming from before: start at hero
                } else {
                    setIntroState(2); // Coming from after: start at chapter
                }
            }

            scrollToIndex(newIndex);
        }

        // Trigger scroll in direction
        function triggerScroll(direction) {
            if (isAnimating) return;
            isAnimating = true;
            handleScroll(direction);
            setTimeout(() => {
                isAnimating = false;
                accumulatedDelta = 0;
                lastDelta = 0;
                scrollDirection = 0;
            }, COOLDOWN);
        }

        // Smooth scroll handling (desktop only)
        if (window.innerWidth > 767) {
            container.addEventListener('wheel', (e) => {
                e.preventDefault();
                const delta = Math.abs(e.deltaY);
                const direction = e.deltaY > 0 ? 1 : -1;

                if (isAnimating) return;

                // Momentum detection: ignore decreasing deltas (trackpad coasting)
                if (lastDelta > 0 && delta < lastDelta * MOMENTUM_THRESHOLD) {
                    lastDelta = delta;
                    return;
                }

                // Reset if direction changes
                if (scrollDirection !== 0 && direction !== scrollDirection) {
                    accumulatedDelta = 0;
                }

                scrollDirection = direction;
                accumulatedDelta += delta;
                lastDelta = delta;

                // Trigger scroll when threshold reached
                if (accumulatedDelta >= DELTA_THRESHOLD) {
                    triggerScroll(direction);
                }
            }, { passive: false });
        }

        // Chapter arrow click handlers
        chapterArrows.forEach(arrow => {
            arrow.addEventListener('click', () => {
                handleScroll(1);
            });
        });

        // Fade in images when loaded
        const images = document.querySelectorAll('.tdmv-photo-block img, .tdmv-intro-photo img, .tdmv-photo-highlight img, .tdmv-insert-image img');

        images.forEach(img => {
            if (img.complete) {
                img.classList.add('loaded');
            } else {
                img.addEventListener('load', () => {
                    img.classList.add('loaded');
                });
            }
        });

        // Insert panels reveal effect
        const insertPanels = document.querySelectorAll('.tdmv-insert');

        const insertObserver = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.classList.add('in-view');
                } else {
                    entry.target.classList.remove('in-view');
                }
            });
        }, {
            threshold: 0.3
        });

        insertPanels.forEach(panel => {
            insertObserver.observe(panel);
        });

        // Uit het dal animations - bar widths and count-up
        const uithetdalInsert = document.getElementById('uithetdalInsert');
        if (uithetdalInsert) {
            // Set bar widths from data attributes
            const bars = uithetdalInsert.querySelectorAll('.tdmv-bar-fill[data-width]');
            bars.forEach(bar => {
                bar.style.setProperty('--bar-width', bar.dataset.width);
            });

            // Count-up animation
            const countUpElements = uithetdalInsert.querySelectorAll('.count-up');
            let countUpStarted = false;

            const uithetdalObserver = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting && !countUpStarted) {
                        countUpStarted = true;

                        // Delay count-up to sync with element animations
                        setTimeout(() => {
                            countUpElements.forEach(el => {
                                const targetValue = parseFloat(el.dataset.value);
                                const suffix = el.dataset.suffix || '';
                                const format = el.dataset.format;
                                const duration = 1500;
                                const startTime = performance.now();

                                function animate(currentTime) {
                                    const elapsed = currentTime - startTime;
                                    const progress = Math.min(elapsed / duration, 1);

                                    // Ease out cubic
                                    const easeProgress = 1 - Math.pow(1 - progress, 3);
                                    const currentValue = targetValue * easeProgress;

                                    if (format === 'thousands') {
                                        el.textContent = Math.round(currentValue).toLocaleString('nl-NL') + suffix;
                                    } else if (suffix === '%') {
                                        el.textContent = currentValue.toFixed(1).replace('.', ',') + suffix;
                                    } else {
                                        el.textContent = Math.round(currentValue) + suffix;
                                    }

                                    if (progress < 1) {
                                        requestAnimationFrame(animate);
                                    }
                                }

                                requestAnimationFrame(animate);
                            });
                        }, 600); // Delay to let elements fade in first
                    }
                });
            }, { threshold: 0.3 });

            uithetdalObserver.observe(uithetdalInsert);
        }

        // Fade out map background when scrolling to photo 6
        const mapInsert = document.querySelector('.tdmv-insert.part-1');
        const photo6 = document.querySelector('.tdmv-photo-block[data-parallax="1.1"]'); // Photo 6 - Handen van Deddo

        if (mapInsert && photo6) {
            const mapFadeObserver = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        mapInsert.classList.add('bg-fade-out');
                    } else {
                        mapInsert.classList.remove('bg-fade-out');
                    }
                });
            }, { threshold: 0.1 });
            mapFadeObserver.observe(photo6);
        }

        // Fade out "Het grote slopen" insert when scrolling to Zakia
        const slopenInsert = document.getElementById('slopenInsert');
        const photoZakia = document.getElementById('photoZakia');

        if (slopenInsert && photoZakia) {
            const slopenFadeObserver = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        slopenInsert.classList.add('bg-fade-out');
                    } else {
                        slopenInsert.classList.remove('bg-fade-out');
                    }
                });
            }, { threshold: 0.1 });
            slopenFadeObserver.observe(photoZakia);
        }

        // Map comparison slider
        const mapCompare = document.getElementById('mapCompare');
        if (mapCompare) {
            const mapBefore = mapCompare.querySelector('.map-before');
            const compareLine = mapCompare.querySelector('.map-compare-line');
            const mapLabel = document.getElementById('mapCompareLabel');

            function updateMapSlider(clientX) {
                const rect = mapCompare.getBoundingClientRect();
                const x = clientX - rect.left;
                const percentage = (x / rect.width) * 100;
                const clampedPercentage = Math.max(0, Math.min(100, percentage));

                mapBefore.style.clipPath = `inset(0 ${100 - clampedPercentage}% 0 0)`;
                compareLine.style.left = `${clampedPercentage}%`;

                // Update label based on which map is dominant (>70%)
                if (clampedPercentage > 70) {
                    mapLabel.textContent = 'Heerlen 1970';
                    mapLabel.classList.add('visible');
                } else if (clampedPercentage < 30) {
                    mapLabel.textContent = 'Heerlen 1980';
                    mapLabel.classList.add('visible');
                } else {
                    mapLabel.classList.remove('visible');
                }
            }

            function resetMapSlider() {
                mapBefore.style.clipPath = 'inset(0 50% 0 0)';
                compareLine.style.left = '50%';
                mapLabel.classList.remove('visible');
            }

            // Mouse events (desktop)
            mapCompare.addEventListener('mousemove', (e) => {
                updateMapSlider(e.clientX);
            });

            mapCompare.addEventListener('mouseleave', () => {
                resetMapSlider();
            });

            // Touch events (mobile)
            let isTouching = false;

            mapCompare.addEventListener('touchstart', (e) => {
                isTouching = true;
                e.preventDefault();
                updateMapSlider(e.touches[0].clientX);
            }, { passive: false });

            mapCompare.addEventListener('touchmove', (e) => {
                if (isTouching) {
                    e.preventDefault();
                    updateMapSlider(e.touches[0].clientX);
                }
            }, { passive: false });

            mapCompare.addEventListener('touchend', () => {
                isTouching = false;
                // Niet resetten op mobiel, zodat gebruiker resultaat kan zien
            });
        }

        // Fade out "Uit het dal" insert when scrolling to Bart
        // Note: uithetdalInsert is already declared above
        const photoBart = document.getElementById('photoBart');

        if (uithetdalInsert && photoBart) {
            const uithetdalFadeObserver = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        uithetdalInsert.classList.add('bg-fade-out');
                    } else {
                        uithetdalInsert.classList.remove('bg-fade-out');
                    }
                });
            }, { threshold: 0.1 });
            uithetdalFadeObserver.observe(photoBart);
        }

        // Delayed zoom for photo 12
        const photo12 = document.getElementById('photo12');
        if (photo12) {
            const photo12Img = photo12.querySelector('img.zoom-delayed');
            let photo12Timeout = null;

            const photo12Observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        photo12Timeout = setTimeout(() => {
                            photo12Img.classList.add('zoom-active');
                        }, 2000);
                    } else {
                        if (photo12Timeout) clearTimeout(photo12Timeout);
                        photo12Img.classList.remove('zoom-active');
                    }
                });
            }, { threshold: 0.5 });
            photo12Observer.observe(photo12);
        }

        // Delayed zoom for photo 40 (Shantal)
        const photo40 = document.getElementById('photo40');
        if (photo40) {
            const photo40Img = photo40.querySelector('img.zoom-delayed');
            let photo40Timeout = null;

            const photo40Observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        photo40Timeout = setTimeout(() => {
                            photo40Img.classList.add('zoom-active');
                        }, 2000);
                    } else {
                        if (photo40Timeout) clearTimeout(photo40Timeout);
                        photo40Img.classList.remove('zoom-active');
                    }
                });
            }, { threshold: 0.5 });
            photo40Observer.observe(photo40);
        }

        // Delayed zoom for photo 3 (Maria)
        const photo3 = document.getElementById('photo3');
        if (photo3) {
            const photo3Img = photo3.querySelector('img.zoom-delayed');
            let photo3Timeout = null;

            const photo3Observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        photo3Timeout = setTimeout(() => {
                            photo3Img.classList.add('zoom-active');
                        }, 2000);
                    } else {
                        if (photo3Timeout) clearTimeout(photo3Timeout);
                        photo3Img.classList.remove('zoom-active');
                    }
                });
            }, { threshold: 0.5 });
            photo3Observer.observe(photo3);
        }

        // Delayed zoom for photo 23a (Martin)
        const photo23a = document.getElementById('photo23a');
        if (photo23a) {
            const photo23aImg = photo23a.querySelector('img.zoom-delayed');
            let photo23aTimeout = null;

            const photo23aObserver = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        photo23aTimeout = setTimeout(() => {
                            photo23aImg.classList.add('zoom-active');
                        }, 2000);
                    } else {
                        if (photo23aTimeout) clearTimeout(photo23aTimeout);
                        photo23aImg.classList.remove('zoom-active');
                    }
                });
            }, { threshold: 0.5 });
            photo23aObserver.observe(photo23a);
        }

        // Delayed zoom for photo 56 (John)
        const photo56 = document.getElementById('photo56');
        if (photo56) {
            const photo56Img = photo56.querySelector('img.zoom-delayed');
            let photo56Timeout = null;

            const photo56Observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        photo56Timeout = setTimeout(() => {
                            photo56Img.classList.add('zoom-active');
                        }, 2000);
                    } else {
                        if (photo56Timeout) clearTimeout(photo56Timeout);
                        photo56Img.classList.remove('zoom-active');
                    }
                });
            }, { threshold: 0.5 });
            photo56Observer.observe(photo56);
        }

        // Delayed zoom for photo 65
        const photo65 = document.getElementById('photo65');
        if (photo65) {
            const photo65Img = photo65.querySelector('img.zoom-delayed');
            let photo65Timeout = null;

            const photo65Observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        photo65Timeout = setTimeout(() => {
                            photo65Img.classList.add('zoom-active');
                        }, 2000);
                    } else {
                        if (photo65Timeout) clearTimeout(photo65Timeout);
                        photo65Img.classList.remove('zoom-active');
                    }
                });
            }, { threshold: 0.5 });
            photo65Observer.observe(photo65);
        }

        // Delayed zoom for photo 28 (Bern)
        const photo28 = document.getElementById('photo28');
        if (photo28) {
            const photo28Img = photo28.querySelector('img.zoom-delayed');
            let photo28Timeout = null;

            const photo28Observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        photo28Timeout = setTimeout(() => {
                            photo28Img.classList.add('zoom-active');
                        }, 2000);
                    } else {
                        if (photo28Timeout) clearTimeout(photo28Timeout);
                        photo28Img.classList.remove('zoom-active');
                    }
                });
            }, { threshold: 0.5 });
            photo28Observer.observe(photo28);
        }


        // Dust particles effect - optimized for performance
        const dustConfigs = [
            { container: document.getElementById('dustContainer'), active: false, parent: document.querySelector('.tdmv-hero-panel') },
            { container: document.querySelector('.dust-photo1'), active: false, parent: document.querySelector('.tdmv-intro-photo') },
            { container: document.querySelector('.dust-chapter1'), active: false, parent: document.querySelector('.tdmv-intro-chapter') },
            { container: document.getElementById('dustOverlay'), active: false, parent: null, isOverlay: true }
        ].filter(c => c.container);

        // Mobile detection and limits
        const isMobile = window.innerWidth <= 767;
        const maxParticles = isMobile ? 40 : 100;
        const overlayMaxParticles = isMobile ? 60 : 150;
        const initialParticles = isMobile ? 30 : 80;
        const overlayInitialParticles = isMobile ? 40 : 100;
        const createInterval = isMobile ? 500 : 250;

        function createDustParticle(container, isOverlay = false) {
            const max = isOverlay ? overlayMaxParticles : maxParticles;
            if (container.children.length >= max) return;

            const particle = document.createElement('div');
            particle.className = 'tdmv-dust-particle';

            // Random size (2-12px, with occasional larger particles)
            const sizeRandom = Math.random();
            const size = sizeRandom < 0.85 ? (Math.random() * 5 + 2) : (Math.random() * 6 + 8);
            particle.style.width = size + 'px';
            particle.style.height = size + 'px';

            // Random starting position
            particle.style.left = Math.random() * 100 + '%';
            particle.style.top = Math.random() * 100 + '%';

            // Random drift direction
            const driftX = (Math.random() - 0.5) * 150;
            const driftY = (Math.random() - 0.5) * 150 - 50;
            particle.style.setProperty('--dust-drift-x', driftX + 'px');
            particle.style.setProperty('--dust-drift-y', driftY + 'px');

            // Random opacity (0.15-0.4)
            const opacity = Math.random() * 0.25 + 0.15;
            particle.style.setProperty('--dust-opacity', opacity);

            // Random duration (12-25s)
            const duration = Math.random() * 13 + 12;
            particle.style.animation = `dustFloat ${duration}s ease-in-out forwards`;

            container.appendChild(particle);

            // Remove particle after animation
            setTimeout(() => {
                particle.remove();
            }, duration * 1000);
        }

        // Initialize particles for a container (lazy)
        function initializeParticles(config) {
            if (config.initialized) return;
            config.initialized = true;

            const count = config.isOverlay ? overlayInitialParticles : initialParticles;
            for (let i = 0; i < count; i++) {
                setTimeout(() => {
                    if (config.active) createDustParticle(config.container, config.isOverlay);
                }, Math.random() * 4000);
            }
        }

        // Observe visibility of dust containers (for intro sections only)
        const dustObserver = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                const config = dustConfigs.find(c => c.parent === entry.target);
                if (config) {
                    config.active = entry.isIntersecting;
                    if (entry.isIntersecting) {
                        initializeParticles(config);
                    }
                }
            });
        }, { threshold: 0.1 });

        dustConfigs.forEach(config => {
            if (config.parent) {
                dustObserver.observe(config.parent);
            }
        });

        // Mobile: stop all dust after scrolling past intro photo
        if (isMobile) {
            const introPhoto = document.querySelector('.tdmv-intro-photo');
            let dustStoppedOnMobile = false;

            const mobileIntroObserver = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (!entry.isIntersecting && !dustStoppedOnMobile) {
                        // Intro photo is out of view, stop all dust
                        dustStoppedOnMobile = true;
                        dustConfigs.forEach(config => {
                            config.active = false;
                        });
                        // Also hide the dust overlay
                        const dustOverlay = document.getElementById('dustOverlay');
                        if (dustOverlay) dustOverlay.classList.remove('active');
                    }
                });
            }, { threshold: 0 });

            if (introPhoto) {
                mobileIntroObserver.observe(introPhoto);
            }
        }

        // Part 1 dust overlay and background - track when in part 1 photos (2-19)
        const dustOverlay = document.getElementById('dustOverlay');
        const part1Bg = document.getElementById('part1Bg');
        const dustOverlayConfig = dustConfigs.find(c => c.isOverlay);
        const part1Photos = document.querySelectorAll('.tdmv-photo-block.part-1, .tdmv-photo-highlight.part-1, .tdmv-insert.part-1');
        let part1PhotosVisible = 0;

        const part1Observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    part1PhotosVisible++;
                } else {
                    part1PhotosVisible--;
                }
            });

            // Activate dust overlay and subtle background when any part 1 photo is visible
            if (part1PhotosVisible > 0) {
                dustOverlay.classList.add('active');
                if (part1Bg) part1Bg.classList.add('visible');
                if (dustOverlayConfig) {
                    dustOverlayConfig.active = true;
                    initializeParticles(dustOverlayConfig);
                }
            } else {
                dustOverlay.classList.remove('active');
                if (part1Bg) part1Bg.classList.remove('visible');
                if (dustOverlayConfig) {
                    dustOverlayConfig.active = false;
                }
            }
        }, { threshold: 0.1 });

        part1Photos.forEach(photo => {
            part1Observer.observe(photo);
        });

        // Continuously create particles using requestAnimationFrame
        let lastParticleTime = 0;
        function particleLoop(timestamp) {
            if (timestamp - lastParticleTime >= createInterval) {
                dustConfigs.forEach(config => {
                    const max = config.isOverlay ? overlayMaxParticles : maxParticles;
                    if (config.active && config.container.children.length < max) {
                        createDustParticle(config.container, config.isOverlay);
                    }
                });
                lastParticleTime = timestamp;
            }
            requestAnimationFrame(particleLoop);
        }
        requestAnimationFrame(particleLoop);

        // Progress indicator - starts from title (0%), counts intro states
        const progressNumber = document.getElementById('progressNumber');
        const scrollContainer = document.getElementById('scrollContainer');
        let currentProgress = 0;
        let targetProgress = 0;
        let progressInitialized = false;

        // Reset scroll to beginning on page load
        scrollContainer.scrollLeft = 0;

        function calculateProgress() {
            // Always return 0 during initialization
            if (!progressInitialized) return 0;

            const isMobile = window.innerWidth <= 767;

            if (isMobile) {
                // Mobile: use vertical scroll (window scroll)
                const scrollTop = window.scrollY || document.documentElement.scrollTop;
                const maxScroll = document.documentElement.scrollHeight - window.innerHeight;

                if (maxScroll > 0) {
                    const scrollProgress = (scrollTop / maxScroll) * 100;
                    return Math.round(scrollProgress);
                }
                return 0;
            } else {
                // Desktop: use horizontal scroll
                const scrollLeft = scrollContainer.scrollLeft;
                const maxScroll = scrollContainer.scrollWidth - scrollContainer.clientWidth;

                // If scroll has started (past intro section), calculate based on scroll position
                if (scrollLeft > 50) {
                    // Scroll progress (3-100%)
                    const scrollProgress = maxScroll > 0 ? (scrollLeft / maxScroll) * 97 : 0;
                    return Math.round(3 + scrollProgress);
                }

                // Otherwise show intro state progress (0%, 1%, 2%)
                // introState 0 = 0%, introState 1 = 1%, introState 2 = 2%
                return introState;
            }
        }

        function updateProgress() {
            // Animate the number smoothly
            if (currentProgress !== targetProgress) {
                const diff = targetProgress - currentProgress;
                const step = diff > 0 ? Math.max(1, Math.ceil(diff / 8)) : Math.min(-1, Math.floor(diff / 8));
                currentProgress += step;

                // Clamp to target if very close
                if (Math.abs(targetProgress - currentProgress) <= 1) {
                    currentProgress = targetProgress;
                }

                progressNumber.textContent = Math.max(0, Math.min(100, currentProgress));
            }

            requestAnimationFrame(updateProgress);
        }

        // Initialize progress to 0
        targetProgress = 0;
        currentProgress = 0;
        progressNumber.textContent = '0';

        // Start animation loop
        requestAnimationFrame(updateProgress);

        // Enable progress calculation after a short delay to avoid load-time scroll events
        setTimeout(() => {
            progressInitialized = true;

            // Update progress on scroll (both horizontal for desktop and vertical for mobile)
            scrollContainer.addEventListener('scroll', () => {
                targetProgress = calculateProgress();
            });

            // Mobile: also listen to window scroll
            window.addEventListener('scroll', () => {
                if (window.innerWidth <= 767) {
                    targetProgress = calculateProgress();
                }
            }, { passive: true });

            // Also update progress when intro state changes
            const originalSetIntroState = setIntroState;
            setIntroState = function(state) {
                originalSetIntroState(state);
                targetProgress = calculateProgress();
            };
        }, 100);

        // Caption fade-in observer (mobiel)
        if (window.innerWidth <= 767) {
            const captions = document.querySelectorAll('.tdmv-caption');
            const captionObserver = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.classList.add('visible');
                    }
                });
            }, {
                threshold: 0.3,
                rootMargin: '0px 0px -50px 0px'
            });

            captions.forEach(caption => {
                captionObserver.observe(caption);
            });

            // Chapter titles fade-in
            const chapterTitles = document.querySelectorAll('.tdmv-chapter-title');
            const titleObserver = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.classList.add('visible');
                    }
                });
            }, {
                threshold: 0.3,
                rootMargin: '0px 0px -50px 0px'
            });

            chapterTitles.forEach(title => {
                titleObserver.observe(title);
            });
        }

        // Soundscape audio system
        const soundscape = document.getElementById('soundscape');
        const soundBtn = document.getElementById('soundBtn');
        const soundWrapper = document.getElementById('soundWrapper');
        const soundTooltip = document.getElementById('soundTooltip');
        const soundscapeHint = document.getElementById('soundscapeHint');
        let audioStarted = false;
        let tooltipShown = false;
        let tooltipTimeout = null;

        function startAudio() {
            if (!audioStarted && soundscape) {
                soundscape.volume = 0.3;
                soundscape.play().then(() => {
                    audioStarted = true;
                    soundBtn.classList.remove('muted');
                    if (soundscapeHint) {
                        soundscapeHint.classList.add('active');
                        soundscapeHint.querySelector('span').textContent = 'Soundscape aan';
                    }
                }).catch(err => {
                    console.log('Audio autoplay blocked:', err);
                });
            }
        }

        // Soundscape hint button in chapter 1
        if (soundscapeHint) {
            soundscapeHint.addEventListener('click', (e) => {
                e.stopPropagation();
                if (!audioStarted) {
                    startAudio();
                } else {
                    // Toggle mute
                    if (soundscape.muted || soundscape.paused) {
                        soundscape.muted = false;
                        if (soundscape.paused) soundscape.play();
                        soundBtn.classList.remove('muted');
                        soundscapeHint.classList.add('active');
                        soundscapeHint.querySelector('span').textContent = 'Soundscape aan';
                    } else {
                        soundscape.muted = true;
                        soundBtn.classList.add('muted');
                        soundscapeHint.classList.remove('active');
                        soundscapeHint.querySelector('span').textContent = 'Zet de soundscape aan';
                    }
                }
            });
        }

        // Toggle mute button (fixed position)
        soundBtn.classList.add('muted');
        soundBtn.addEventListener('click', (e) => {
            e.stopPropagation();
            if (soundscape.paused) {
                soundscape.play();
                soundBtn.classList.remove('muted');
                audioStarted = true;
            } else if (soundscape.muted) {
                soundscape.muted = false;
                soundBtn.classList.remove('muted');
            } else {
                soundscape.muted = true;
                soundBtn.classList.add('muted');
            }
            // Hide tooltip when clicked
            soundTooltip.classList.remove('visible');
            if (tooltipTimeout) clearTimeout(tooltipTimeout);
        });

        // Show/hide sound wrapper and tooltip based on scroll position
        const firstPhotoBlock = document.querySelector('.tdmv-photo-block.part-1');
        let hasScrolledToPhotos = false;

        const soundWrapperObserver = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    // Scrolled to photo 2 (first photo-block)
                    soundWrapper.classList.add('visible');
                    hasScrolledToPhotos = true;

                    // Show tooltip if audio is playing and not shown before
                    if (audioStarted && !soundscape.muted && !tooltipShown) {
                        tooltipShown = true;
                        soundTooltip.classList.add('visible');

                        // Hide tooltip after 5 seconds
                        tooltipTimeout = setTimeout(() => {
                            soundTooltip.classList.remove('visible');
                        }, 5000);
                    }
                }
            });
        }, { threshold: 0.1 });

        if (firstPhotoBlock) {
            soundWrapperObserver.observe(firstPhotoBlock);
        }

        // Also show wrapper when any part-1 photo is visible (in case user scrolls fast)
        const anyPhoto = document.querySelectorAll('.tdmv-photo-block');
        const photoVisibilityObserver = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting && !soundWrapper.classList.contains('visible')) {
                    soundWrapper.classList.add('visible');
                }
            });
        }, { threshold: 0.1 });

        anyPhoto.forEach(photo => photoVisibilityObserver.observe(photo));

        // Hide wrapper when back at intro section
        const introChapter = document.querySelector('.tdmv-intro-chapter');
        const introVisibilityObserver = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting && entry.intersectionRatio > 0.5) {
                    soundWrapper.classList.remove('visible');
                }
            });
        }, { threshold: 0.5 });

        if (introChapter) {
            introVisibilityObserver.observe(introChapter);
        }

        // Position intro photo caption based on actual photo width
        function positionIntroCaption() {
            const introPhoto = document.querySelector('.tdmv-intro-photo img');
            const introCaption = document.querySelector('.tdmv-intro-photo > .tdmv-caption');

            if (introPhoto && introCaption) {
                const photoWidth = introPhoto.offsetWidth;
                const containerWidth = window.innerWidth;
                const photoLeft = (containerWidth - photoWidth) / 2;
                const captionLeft = photoLeft + photoWidth + 12; // 12px gap
                introCaption.style.left = captionLeft + 'px';
            }
        }

        // Position caption when image loads and on resize
        const introPhotoImg = document.querySelector('.tdmv-intro-photo img');
        if (introPhotoImg) {
            if (introPhotoImg.complete) {
                positionIntroCaption();
            } else {
                introPhotoImg.addEventListener('load', positionIntroCaption);
            }
            window.addEventListener('resize', positionIntroCaption);
        }

        // Chapter backgrounds - fade out when leaving
        // Note: introChapter is already declared above
        if (introChapter) {
            const firstPhotoBlock = document.querySelector('.tdmv-photo-block.part-1');
            if (firstPhotoBlock) {
                const bgObserver = new IntersectionObserver((entries) => {
                    entries.forEach(entry => {
                        if (entry.isIntersecting) {
                            introChapter.classList.add('bg-hidden');
                        }
                    });
                }, { threshold: 0.1 });
                bgObserver.observe(firstPhotoBlock);

                // Restore when back at intro
                const introObserver = new IntersectionObserver((entries) => {
                    entries.forEach(entry => {
                        if (entry.isIntersecting && entry.intersectionRatio > 0.5) {
                            introChapter.classList.remove('bg-hidden');
                        }
                    });
                }, { threshold: 0.5 });
                introObserver.observe(introSection);
            }
        }

        // Chapter 2 and 3 background fade
        const chapter2 = document.querySelector('.tdmv-chapter.chapter-2');
        const chapter3 = document.querySelector('.tdmv-chapter.chapter-3');

        // Find first photo after each chapter
        function getNextPhoto(chapter) {
            let sibling = chapter.nextElementSibling;
            while (sibling) {
                if (sibling.classList.contains('tdmv-photo-block') ||
                    sibling.classList.contains('tdmv-photo-highlight')) {
                    return sibling;
                }
                sibling = sibling.nextElementSibling;
            }
            return null;
        }

        // Setup chapter fade observers
        [chapter2, chapter3].forEach(chapter => {
            if (!chapter) return;

            const nextPhoto = getNextPhoto(chapter);
            if (!nextPhoto) return;

            // Fade out when next photo is visible
            const fadeOutObserver = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        chapter.classList.add('bg-hidden');
                    }
                });
            }, { threshold: 0.1 });
            fadeOutObserver.observe(nextPhoto);

            // Restore when chapter is fully visible again
            const restoreObserver = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting && entry.intersectionRatio > 0.5) {
                        chapter.classList.remove('bg-hidden');
                    }
                });
            }, { threshold: 0.5 });
            restoreObserver.observe(chapter);
        });
    </script>

    <!-- Leaflet Map -->
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <script>
        // Initialize mine map
        const isMobileMap = window.innerWidth <= 767;
        const mineMap = L.map('mineMap', {
            zoomControl: !isMobileMap,
            attributionControl: false,
            scrollWheelZoom: false
        }).setView([50.90, 5.97], isMobileMap ? 11 : 12);

        // Grayscale map tiles (Stamen Toner Lite or CartoDB)
        L.tileLayer('https://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}{r}.png', {
            attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors &copy; <a href="https://carto.com/attributions">CARTO</a>',
            maxZoom: 19
        }).addTo(mineMap);

        // Custom marker icon
        const mineIcon = L.divIcon({
            className: 'mine-marker',
            iconSize: [32, 32]
        });

        // Mine locations with coordinates, production and workers data
        const mines = [
            { name: 'Emma', coords: [50.905, 5.948], location: 'Treebeek', years: '1911–1973', totalTons: 109.03, depth: 980, workers: 10000, type: 'Staatsmijn', image: 'toen-de-mijnen-verdwenen/mijnen/emma.jpg' },
            { name: 'Maurits', coords: [50.958, 5.827], location: 'Lutterade', years: '1926–1967', totalTons: 96.21, depth: 895, workers: 9500, type: 'Staatsmijn', image: 'toen-de-mijnen-verdwenen/mijnen/maurits.jpg' },
            { name: 'Hendrik', coords: [50.928, 5.970], location: 'Rumpen', years: '1915–1963', totalTons: 61.20, depth: 1058, workers: 9500, type: 'Staatsmijn', image: 'toen-de-mijnen-verdwenen/mijnen/hendrik.jpg' },
            { name: 'Wilhelmina', coords: [50.875, 6.021], location: 'Terwinselen', years: '1906–1969', totalTons: 59.24, depth: 823, workers: 9500, type: 'Staatsmijn', image: 'toen-de-mijnen-verdwenen/mijnen/wilhelmina.jpg' },
            { name: 'Oranje-Nassau III', coords: [50.885, 5.957], location: 'Heerlerheide', years: '1917–1973', totalTons: 38.27, depth: 844, workers: 3800, type: 'Particulier', image: 'toen-de-mijnen-verdwenen/mijnen/on3.jpg' },
            { name: 'Domaniale', coords: [50.867, 6.065], location: 'Kerkrade', years: '1815–1969', totalTons: 37.99, depth: 802, workers: 2764, type: 'Particulier', image: 'toen-de-mijnen-verdwenen/mijnen/dominialen.jpg' },
            { name: 'Oranje-Nassau II', coords: [50.865, 5.960], location: 'Schaesberg', years: '1904–1971', totalTons: 34.06, depth: 477, workers: 2100, type: 'Particulier', image: 'toen-de-mijnen-verdwenen/mijnen/on2.jpg' },
            { name: 'Oranje-Nassau I', coords: [50.877, 5.973], location: 'Heerlen', years: '1899–1974', totalTons: 31.98, depth: 471, workers: 2900, type: 'Particulier', image: 'toen-de-mijnen-verdwenen/mijnen/on1.jpg' },
            { name: 'Julia', coords: [50.894, 6.055], location: 'Eygelshoven', years: '1926–1974', totalTons: 31.96, depth: 568, workers: 4994, type: 'Particulier', image: 'toen-de-mijnen-verdwenen/mijnen/julia.jpg' },
            { name: 'Laura', coords: [50.898, 6.045], location: 'Eygelshoven', years: '1905–1968', totalTons: 31.89, depth: 748, workers: 4428, type: 'Particulier', image: 'toen-de-mijnen-verdwenen/mijnen/laura.jpg' },
            { name: 'Willem-Sophia', coords: [50.855, 6.028], location: 'Spekholzerheide', years: '1902–1970', totalTons: 22.68, depth: 651, workers: 1691, type: 'Particulier', image: 'toen-de-mijnen-verdwenen/mijnen/willemsophia.jpg' },
            { name: 'Oranje-Nassau IV', coords: [50.912, 5.932], location: 'Heksenberg', years: '1925–1966', totalTons: 13.75, depth: 740, workers: 3100, type: 'Particulier', image: 'toen-de-mijnen-verdwenen/mijnen/on4.jpg' }
        ];

        // Find max tonnage and workers for bar chart scaling
        const maxTons = Math.max(...mines.map(m => m.totalTons));
        const maxWorkers = Math.max(...mines.map(m => m.workers));

        // Add markers to map and store references
        const mineMarkers = {};
        mines.forEach(mine => {
            const marker = L.marker(mine.coords, { icon: mineIcon }).addTo(mineMap);
            const popupContent = mine.image
                ? `<img src="${mine.image}" alt="${mine.name}" class="mine-popup-img"><strong>${mine.name}</strong><br><span style="opacity:0.7">${mine.location}</span><br>${mine.years}<br>${mine.depth} m diep`
                : `<strong>${mine.name}</strong><br><span style="opacity:0.7">${mine.location}</span><br>${mine.years}<br>${mine.depth} m diep`;
            marker.bindPopup(popupContent, { maxWidth: 220 });
            mineMarkers[mine.name] = marker;
        });

        // Generate mine statistics HTML with bar charts
        const mineStatsContainer = document.getElementById('mineStats');
        if (mineStatsContainer) {
            const statsHTML = mines.map(mine => {
                const barWidth = (mine.totalTons / maxTons) * 100;
                const workerBarWidth = (mine.workers / maxWorkers) * 100;
                const workersFormatted = mine.workers.toLocaleString('nl-NL');
                return `
                <div class="tdmv-mine-stat">
                    <div class="tdmv-mine-stat-name" data-mine="${mine.name}">${mine.name}</div>
                    <div class="tdmv-mine-stat-location">${mine.location} · ${mine.depth} m diep</div>
                    <div class="tdmv-mine-stat-bars">
                        <div class="tdmv-mine-stat-bar">
                            <div class="tdmv-mine-stat-bar-fill" style="width: 0%" data-width="${barWidth}%"></div>
                        </div>
                        <div class="tdmv-mine-stat-bar tdmv-worker-bar">
                            <div class="tdmv-mine-stat-bar-fill tdmv-worker-fill" style="width: 0%" data-width="${workerBarWidth}%"></div>
                        </div>
                    </div>
                    <div class="tdmv-mine-stat-data"><span class="tdmv-tons">${mine.totalTons.toFixed(1)} mln ton</span> · <span class="tdmv-workers">~${workersFormatted} arbeiders</span></div>
                </div>
            `}).join('');
            mineStatsContainer.innerHTML = statsHTML;

            // Add click handlers to mine names
            mineStatsContainer.querySelectorAll('.tdmv-mine-stat-name').forEach(el => {
                el.style.cursor = 'pointer';
                el.addEventListener('click', () => {
                    const mineName = el.dataset.mine;
                    const marker = mineMarkers[mineName];
                    if (marker) {
                        mineMap.panTo(marker.getLatLng());
                        marker.openPopup();
                    }
                });
            });

            // Animate bars when in view
            const statsObserver = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        const bars = entry.target.querySelectorAll('.tdmv-mine-stat-bar-fill');
                        bars.forEach((bar, i) => {
                            setTimeout(() => {
                                bar.style.width = bar.dataset.width;
                            }, i * 30);
                        });
                        statsObserver.unobserve(entry.target);
                    }
                });
            }, { threshold: 0.3 });
            statsObserver.observe(mineStatsContainer);
        }

        // Invalidate size when map becomes visible (for proper rendering)
        const mapObserver = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    mineMap.invalidateSize();
                }
            });
        }, { threshold: 0.1 });

        mapObserver.observe(document.getElementById('mineMap'));
    </script>
</body>
</html>
